(window.webpackJsonp=window.webpackJsonp||[]).push([["study-property-pages-with-definitions"],{WUYT:function(e,t,i){"use strict";i.r(t);i("YFKU"),i("HbRj");var s=i("Eyy1"),n=i("Kxc7"),o=i("HSjo"),r=i("1yQO"),l=i("hY0g"),c=i.n(l),u=i("25b6");function a(e,t){const i=e.id;return"first_visible_bar_time"!==i&&"last_visible_bar_time"!==i&&("time"!==e.type&&(!e.isHidden&&(!(t&&!e.confirm)&&void 0===e.groupId)))}function d(e){return e.name||Object(u.a)(e.id.toLowerCase())}var h=i("zqjM"),b=i("0YCj"),p=i.n(b),y=i("pPtI"),m=i("lgIt");const _=window.t("Style"),O=window.t("Inputs"),g=window.t("Visibility"),w=["1","3","5","15","30","45","60","120","180","240","1D","1W","1M"].map(e=>({value:e,title:Object(y.getTranslatedResolutionModel)(e).hint}));var f=i("Equz");i.d(t,"StudyOverlayDefinitionsViewModel",(function(){return P}));const S=[{title:window.t("Bars"),value:0},{title:window.t("Candles"),value:1},{title:window.t("Hollow Candles"),value:9},{title:window.t("Line"),value:2},{title:window.t("Area"),value:3},{title:window.t("Baseline"),value:10}],j=window.t("Style"),I=window.t("Price Line"),v=window.t("Override Min Tick");class P extends class{constructor(e,t){this._inputSourceItems=null,this._propertyPages=[],this._sourceInput=null,this._source=t,this._undoModel=e;const i=this._sortInputs(this._source.metaInfo().inputs);for(const e of i)"source"===e.type&&(this._sourceInput=e);this._createPropertyRages(),null!==this._inputSourceItems&&this._undoModel.model().dataSourceCollectionChanged().subscribe(this,()=>{null!==this._inputSourceItems&&this._inputSourceItems.setValue(this._getInputSourceItems())})}destroy(){null!==this._inputSourceItems&&this._undoModel.model().dataSourceCollectionChanged().unsubscribeAll(this),this._propertyPages.forEach(e=>{Object(o.u)(e.definitions.value())})}propertyPages(){return Promise.resolve(this._propertyPages)}_createPropertyRages(){this._propertyPages=[];const e=this._createInputsPropertyPage();null!==e&&this._propertyPages.push(e);const t=this._createStylePropertyPage();null!==t&&this._propertyPages.push(t),this._propertyPages.push(this._createVisibilitiesPropertyPage())}_createStylePropertyPage(){const e=this._stylePropertyDefinitions();return null!==e?Object(r.a)(e,"style",_):null}_createVisibilitiesPropertyPage(){const e=this._source.properties().childs().intervalsVisibilities.childs();return Object(r.a)(Object(m.a)(this._undoModel,e,this._source.title(!0)),"visibility",g)}_stylePropertyDefinitions(){return null}_createInputsPropertyPage(){const e=this._inputsPropertyDefinitions();return null!==e?Object(r.a)(e,"inputs",O):null}_inputsPropertyDefinitions(){const e=this._sortInputs(this._source.metaInfo().inputs),t=this._source.properties().childs().inputs.childs();return null!==this._sourceInput&&(this._inputSourceItems=new c.a(this._getInputSourceItems())),function(e,t,i,n,r){const l=[];for(const u of t){if(!a(u,n))continue;const t=d(u),h=window.t(t,{context:"input"});let b=null;if("resolution"===u.type)b=Object(o.k)({option:Object(o.b)(e,i[u.id],"Change "+t)},{id:"StudyInput"+t,title:h,
options:new c.a(r.resolutionItems)});else if("source"===u.type){const n=Object(s.ensure)(r.sourcesItems);b=Object(o.k)({option:Object(o.b)(e,i[u.id],"Change "+t)},{id:"StudyInput"+t,title:h,options:n})}else if("options"in u&&void 0!==u.options){const s=[];for(const e of u.options){const t=u.optionsTitles&&u.optionsTitles[e]||e,i=window.t(t);s.push({value:e,title:i})}b=Object(o.k)({option:Object(o.b)(e,i[u.id],"Change "+t)},{id:"StudyInput"+t,title:h,options:new c.a(s)})}else if("symbol"===u.type){const n=i[u.id],l=Object(s.ensure)(r.getSymbolInfoBySymbol),c=Object(s.ensure)(r.onSymbolsInfosChanged);b=Object(o.p)({symbol:Object(o.z)(e,n,l,c,"Change "+h,r.customSymbolInputSetter)},{id:"StudyInput"+t,title:h})}else if("session"===u.type)b=Object(o.o)({session:Object(o.b)(e,i[u.id],"Change "+t)},{id:"StudyInput"+t,title:h});else if("bool"===u.type)b=Object(o.c)({checked:Object(o.b)(e,i[u.id],"Change "+h)},{id:"StudyInput"+t,title:h});else if("integer"===u.type||"float"===u.type||"price"===u.type){const s={id:"StudyInput"+t,title:h,type:"float"===u.type||"price"===u.type?1:0,defval:u.defval};u.min&&(s.min=new c.a(u.min)),u.max&&(s.max=new c.a(u.max)),void 0!==u.step&&isFinite(u.step)&&u.step>0&&(s.step=new c.a(u.step)),b=Object(o.j)({value:Object(o.b)(e,i[u.id],"Change "+h)},s)}else b=Object(o.q)({text:Object(o.b)(e,i[u.id],"Change "+h)},{id:"StudyInput"+t,title:h,isEditable:!0,isMultiLine:!1});l.push(b)}return 0===l.length?null:l}(this._undoModel,e,t,!1,{resolutionItems:w,customSymbolInputSetter:this._customSymbolInputSetter(),getSymbolInfoBySymbol:this._getSymbolInfoBySymbol.bind(this),onSymbolsInfosChanged:this._source.symbolsResolved(),sourcesItems:this._inputSourceItems})}_sortInputs(e){return e}_getInputSourceItems(){const e=h.b.slice(),t=Object(s.ensureNotNull)(this._sourceInput);if(this._source&&this._source.isChildStudy()){const i=this._source.parentSource(),s=i.title(),n=p.a.getChildSourceInputTitles(t,i.metaInfo(),s);for(const t of Object.keys(n))e.push({id:t,value:t,title:n[t]})}if(n.enabled("study_on_study")&&this._source&&(this._source.isChildStudy()||p.a.canBeChild(this._source.metaInfo()))){const t=new Set([this._source,...this._source.getAllChildren()]);this._undoModel.model().allStudies().filter(e=>e.canHaveChildren()&&!t.has(e)).forEach(t=>{const i=t.title(!0,void 0,!0),n=t.sourceId()||"#"+t.id(),o=t.metaInfo(),r=o.styles,l=o.plots||[];if(1===l.length)e.push({id:n,value:n,title:i});else if(l.length>1){const t=l.reduce((e,t,o)=>{if(!p.a.canPlotBeSourceOfChildStudy(t.type))return e;let l;try{l=Object(s.ensureDefined)(Object(s.ensureDefined)(r)[t.id]).title}catch(e){l=t.id}return{...e,[`${n}$${o}`]:`${i}: ${l}`}},{});for(const i of Object.keys(t))e.push({id:i,value:i,title:t[i]})}})}return e}_customSymbolInputSetter(){}_getSymbolInfoBySymbol(e){return this._source.resolvedSymbolInfoBySymbol(e.value())}}{constructor(e,t){super(e,t),this._stylesPropertyPage=null,this.propertyPages().then(e=>{this._stylesPropertyPage=e.filter(e=>"style"===e.id)[0]}),this._source.properties().childs().style.subscribe(this,e=>{
null!==this._stylesPropertyPage&&(Object(o.u)(this._stylesPropertyPage.definitions.value()),this._stylesPropertyPage.definitions.setValue(this._stylePropertyDefinitions()))})}destroy(){this._source.properties().childs().style.unsubscribeAll(this),super.destroy()}_customSymbolInputSetter(){return e=>{this._undoModel.setSymbol(this._source,e)}}_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=Object(o.k)({option:Object(o.b)(this._undoModel,e.style,"Change study overlay style")},{id:"StudyOverlayStyle",title:j,options:new c.a(S)}),i=Object(o.c)({checked:Object(o.b)(this._undoModel,e.showPriceLine,"Change Price Price Line")},{id:"StudyOverlayPriceLine",title:I}),s=Object(o.k)({option:Object(o.b)(this._undoModel,e.minTick,"Change study overlay style")},{id:"StudyOverlayMinTick",title:v,options:new c.a(Object(h.d)())}),n=Object(u.c)(this._source.title());return[Object(o.l)([t,...this._getSeriesStylesDefinitions()],"SeriesStyleGroup"+n),i,s]}_getSeriesStylesDefinitions(){const e=this._source.properties().childs();return Object(f.a)(this._undoModel,e,e.style.value(),{seriesPriceSources:h.b,lineStyleTypes:h.c,isJapaneseChartsAvailable:!1},"mainSeries")}}},lgIt:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var s=i("Kxc7"),n=i("HSjo"),o=i("hY0g"),r=i.n(o),l=i("pPtI");const c=window.t("Ticks"),u=window.t("Seconds"),a=window.t("Minutes"),d=window.t("Hours"),h=window.t("Days"),b=window.t("Weeks"),p=window.t("Months"),y=(window.t("Ranges"),[1,59]),m=[1,59],_=[1,24],O=[1,366],g=[1,52],w=[1,12];function f(e,t,i){const o=[];if(s.enabled("tick_resolution")){const s=Object(n.c)({checked:Object(n.b)(e,t.ticks,`Change ${i} Visibility On Ticks`)},{id:"IntervalsVisibilitiesTicks",title:c});o.push(s)}if(Object(l.isSecondsEnabled)()){const s=Object(n.n)({checked:Object(n.b)(e,t.seconds,`Change ${i} Visibility On Seconds`),from:Object(n.b)(e,t.secondsFrom,`Change ${i} Seconds From`),to:Object(n.b)(e,t.secondsTo,`Change ${i} Seconds To`)},{id:"IntervalsVisibilitiesSecond",title:u,min:new r.a(y[0]),max:new r.a(y[1])});o.push(s)}const f=Object(n.n)({checked:Object(n.b)(e,t.minutes,`Change ${i} Visibility On Minutes`),from:Object(n.b)(e,t.minutesFrom,`Change ${i} Minutes From`),to:Object(n.b)(e,t.minutesTo,`Change ${i} Minutes To`)},{id:"IntervalsVisibilitiesMinutes",title:a,min:new r.a(m[0]),max:new r.a(m[1])}),S=Object(n.n)({checked:Object(n.b)(e,t.hours,`Change ${i} Visibility On Hours`),from:Object(n.b)(e,t.hoursFrom,`Change ${i} Hours From`),to:Object(n.b)(e,t.hoursTo,`Change ${i} Hours To`)},{id:"IntervalsVisibilitiesHours",title:d,min:new r.a(_[0]),max:new r.a(_[1])}),j=Object(n.n)({checked:Object(n.b)(e,t.days,`Change ${i} Visibility On Days`),from:Object(n.b)(e,t.daysFrom,`Change ${i} Days From`),to:Object(n.b)(e,t.daysTo,`Change ${i} Days To`)},{id:"IntervalsVisibilitiesDays",title:h,min:new r.a(O[0]),max:new r.a(O[1])});o.push(f,S,j);const I=Object(n.n)({checked:Object(n.b)(e,t.weeks,`Change ${i} Visibility On Weeks`),from:Object(n.b)(e,t.weeksFrom,`Change ${i} Weeks From`),
to:Object(n.b)(e,t.weeksTo,`Change ${i} Weeks To`)},{id:"IntervalsVisibilitiesWeeks",title:b,min:new r.a(g[0]),max:new r.a(g[1])}),v=Object(n.n)({checked:Object(n.b)(e,t.months,`Change ${i} Visibility On Months`),from:Object(n.b)(e,t.monthsFrom,`Change ${i} Months From`),to:Object(n.b)(e,t.monthsTo,`Change ${i} Months To`)},{id:"IntervalsVisibilitiesMonths",title:p,min:new r.a(w[0]),max:new r.a(w[1])});return o.push(I,v),o}}}]);